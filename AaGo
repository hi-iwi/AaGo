#!/bin/bash


Proj=""
while getopts ':p:' opt
do
    case $opt in
    p)
        Proj=${OPTARG}
    ;;
    h)
        cat << EOF
Usage: AaGo [\$options]
    -p <dir>   : new project
EOF
        exit 0
    ;;
    ?)
        echo "未知参数"
        exit 1
    ;;
    esac
done

shift $((OPTIND-1))

initProject() {
    dir="$1"
    if [ ! -d "$dir" ]; then
        echo "Project directory $dir is not found"
        exit 1
    fi
    mkdir -p $dir'/app/controller'
    mkdir -p $dir'/app/dto'   
    mkdir -p $dir'/app/entity'
    mkdir -p $dir'/app/router/middleware'
    mkdir -p $dir'/app/model'
    mkdir -p $dir'/app/service'
    mkdir -p $dir'/app/rservice/rpci'
    mkdir -p $dir'/app/register'

    mkdir -p $dir'/bootstrap'
    mkdir -p $dir'/conf'   

    mkdir -p $dir'/deploy/config'
    mkdir -p $dir'/deploy/public/asset'
    mkdir -p $dir'/deploy/views'

    mkdir -p $dir'/dic'
    mkdir -p $dir'/driver'
    mkdir -p $dir'/enum'
    mkdir -p $dir'/job'             
    mkdir -p $dir'/console'
    mkdir -p $dir'/storage/logs'
    mkdir -p $dir'/storage/docs'
    mkdir -p $dir'/tests'
    mkdir -p $dir'/helper'

    touch $dir'/main.go'
}

initProject $Proj
